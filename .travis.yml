language: javascript

install:
  - npm install -g eslint csslint uglify-es csso-cli

script:
  - eslint src/*.js
  - csslint src/*.css

after_script:
  - uglifyjs src/callsign.js --compress --mangle --output callsign.min.js
  - csso src/callsign.css --output callsign.min.css
  - zip callsign.zip callsign.min.* src/*
  - cat callsign.zip | base64

deploy:
  provider: releases
  api_key:
    secure: lkjnsdflnsdlkklsndflnsdflknsfdlkn
  file: "callsign.zip"
  skip_cleanup: true
  on:
    tags: true
